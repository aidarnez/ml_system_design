# ML System Design Doc "RAG система для работы с документацией ЦБ"
---
### 1.1. Зачем идем в разработку продукта?
#### Бизнес-цель:
Разработать Q&A систему, которая будет генерировать ответ на вопросы пользователей (DS, Product Owner) по риск-менеджменту, основываясь на документации ЦБ
#### Почему станет лучше, чем сейчас, от использования ML:**
  1. **Сокращение времени на поиск ответа**: пользователю не прийдётся самостоятельно искать информацию в документации
  2. **Поиск конкретных пунктов документации и цитат из них**: при обращении в ЦБ с вопросом, обычно, нужно ссылаться на контретный пункт документации, если система сможет находить пункты, в которых описывается заданный вопрос, то это облегчит взаимодействие с ЦБ
  3. **Поиск в большом массиве документации**: часто в документах ЦБ есть ссылки на другие документы и постановления, поэтому было бы удобно получить анализ с учётом всей доступной документации на данную тему
#### Что будем считать успехом итерации с точки зрения бизнеса:
  1. Качество работы системы превосходит стандартную RAG архитектуру (Lang chain + LLM) на тестовом наборе вопросов 
  2. Решен хотя бы один реальный вопрос по документации ЦБ с помощью системы
### 1.2. Бизнес-требования и ограничения
#### Краткое описание бизнес-требований
Основные требования к системе:
  1. Понимать сложные вопросы по риск-менеджменту
  2. Находить и извлекать ответы из предоставленного корпуса актуальных документов ЦБ
  3. Обосновывать каждый ответ цитатами и ссылкой на конкретные пункты документации
  4. Иметь лучшее качество, чем стандартная RAG архитектура на тестовом наборе вопросов
#### Бизнес-ограничения:
  1. Каждый ответ системы должен быть основан на конкретных пунктах документации ЦБ
  2. В ответе системы должно быть указание на конкретный пункт из документации и релевантная цитата из этого пункта
  3. Галлюцинации при генерации ответа являются недопустимыми
  4. При реализации модели необходимо использовать только внутренние продукты Сбера (Giga-chat в качестве LLM, Сберчат для создания чат-бота)
#### Ожидание от конкретной итерации
  1. Качество работы модели превосходит baseline (базовый RAG) на тестовом наборе вопросов
  2. Наличие чат-бота в качестве интерфейса для работы с системой
#### Описание бизнес-процесса пилота
  1. Пользователь задаёт вопрос по риск-моделированию
  2. Осуществляется поиск релевантной информации в документации ЦБ
  3. Информация суммаризируется
  4. Осуществляется генерации ответа с ссылками на конкретные пункты документации
#### Что считаем успешным пилотом
  1. Модель превосходит baseline модель по метриками (Exact Match, Citation F1) на тестовом наборе вопросов
  2. Модель помогла в решении хотя бы 1 реального вопроса по документации
  3. Реализован чат-бот для общения с системой
### 1.3. Что входит в скоуп проекта/итерации, что не входит
#### В рамка текущей итерации:
  1. Разработка модели на основном массиве документации ЦБ
  2. Разработка системы хранения документации
  3. Разработка моделей retrieval и answer generator
  4. Разработка базового интерфейса взаимодействия с моделью в виде чат-бота
#### Что не будет закрыто:
  1. Работа с полным корпусом документации ЦБ
  2. Дообучение модели на вопросах, в которых модель сгенерировала неверный ответ
#### Описание результата с точки зрения качества кода и воспроизводимости решения
  1. Разработана система хранения документации
  2. Разработана модель retrieval
  3. Разработана модель answer generator
  4. Для всех компонентов системы написана документация
  5. Весь код системы загружен на BitBucket в ветку main
  6. Все commit прошли code-review
#### Планируемый технический долг
  1. Добавление полного корпуса документов ЦБ для генерации ответа
  2. Дообучение модели на вопросах, в которых модель генерирует неверный ответ